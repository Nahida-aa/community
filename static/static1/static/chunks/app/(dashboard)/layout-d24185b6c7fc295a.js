(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5642],{60072:function(e,t,n){Promise.resolve().then(n.bind(n,68849)),Promise.resolve().then(n.bind(n,33277)),Promise.resolve().then(n.bind(n,31463)),Promise.resolve().then(n.bind(n,41614)),Promise.resolve().then(n.bind(n,57550)),Promise.resolve().then(n.bind(n,28919)),Promise.resolve().then(n.bind(n,62741)),Promise.resolve().then(n.bind(n,83534)),Promise.resolve().then(n.bind(n,97976)),Promise.resolve().then(n.bind(n,98823)),Promise.resolve().then(n.bind(n,60497)),Promise.resolve().then(n.bind(n,52519)),Promise.resolve().then(n.bind(n,11344)),Promise.resolve().then(n.bind(n,91267)),Promise.resolve().then(n.t.bind(n,86579,19)),Promise.resolve().then(n.t.bind(n,42540,19)),Promise.resolve().then(n.t.bind(n,64590,23)),Promise.resolve().then(n.t.bind(n,32574,23)),Promise.resolve().then(n.bind(n,73786)),Promise.resolve().then(n.t.bind(n,66380,23)),Promise.resolve().then(n.bind(n,9607)),Promise.resolve().then(n.bind(n,74352)),Promise.resolve().then(n.bind(n,14564)),Promise.resolve().then(n.bind(n,47246)),Promise.resolve().then(n.bind(n,77210)),Promise.resolve().then(n.bind(n,33082)),Promise.resolve().then(n.bind(n,56196)),Promise.resolve().then(n.bind(n,86765)),Promise.resolve().then(n.bind(n,993)),Promise.resolve().then(n.bind(n,13205)),Promise.resolve().then(n.bind(n,82633)),Promise.resolve().then(n.bind(n,83404))},5602:function(e,t,n){"use strict";n.d(t,{ly:function(){return i},yn:function(){return a},cX:function(){return o}});var r=n(71590);let s="Dashboard",i={title:s,icon:"dashboard",redirect:"/dashboard",path:"/dashboard",children:[{title:"仪表盘",icon:(0,r.jsx)("i",{className:"icon-[mingcute--dashboard-line]"}),path:""},{title:"文稿",icon:(0,r.jsx)("i",{className:"icon-[mingcute--code-line]"}),redirect:"/dashboard/posts/list",path:"/posts",children:[{title:"列表",icon:(0,r.jsx)("i",{className:"icon-[mingcute--table-2-line]"}),path:"/list"},{title:"编辑",icon:(0,r.jsx)("i",{className:"icon-[mingcute--pen-line]"}),path:"/edit"},{title:"分类/标签",icon:(0,r.jsx)("i",{className:"icon-[mingcute--pen-line]"}),path:"/category"}]},{title:"手记",icon:(0,r.jsx)("i",{className:"icon-[mingcute--quill-pen-line]"}),redirect:"/dashboard/notes/list",path:"/notes",children:[{title:"列表",icon:(0,r.jsx)("i",{className:"icon-[mingcute--table-2-line]"}),path:"/list"},{title:"编辑",icon:(0,r.jsx)("i",{className:"icon-[mingcute--pen-line]"}),path:"/edit"},{title:"话题",icon:(0,r.jsx)(function(e){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",...e,children:(0,r.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"4",children:[(0,r.jsx)("path",{d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24a19.94 19.94 0 0 0 3.368 11.112c.244.363-.213 2.66-1.368 6.888c4.229-1.155 6.525-1.612 6.888-1.368A19.94 19.94 0 0 0 24 44Z"}),(0,r.jsx)("path",{strokeLinecap:"round",d:"M16.605 19.82h16.779m-11.537-4.082l-2.914 16.524m9.914-16.524l-2.914 16.524M14.604 28h16.78"})]})})},{}),path:"/topics"}]},{title:"评论",icon:(0,r.jsx)("i",{className:"icon-[mingcute--comment-line]"}),path:"/comments"},{title:"页面",icon:(0,r.jsx)("i",{className:"icon-[mingcute--file-line]"}),path:"/pages"},{title:"完整功能与其他设置",icon:(0,r.jsx)("i",{className:"icon-[mingcute--settings-1-line]"}),path:"/vue"}]},l=new Map;function o(e){return l.get(e.split("/").slice(0,-1).join("/"))}!function e(t,n){let r=parent?"".concat(n||"").concat(t.path):t.path;l.set(r,t),t.children&&t.children.forEach(t=>{e(t,r)})}(i),function e(t,n){n&&n.title!==s&&(t.parent=n),t.children&&t.children.forEach(n=>{e(n,t)})}(i);let a=[...l.entries()].filter(e=>{let[t,n]=e;return!n.redirect})},14564:function(e,t,n){"use strict";n.r(t),n.d(t,{LayoutHeader:function(){return w}});var r=n(71590),s=n(63488),i=n(4711),l=n(36183),o=n(52282),a=n(62291),c=n(97270),u=n(5602),d=n(62719),m=n(7085),h=n(58704),f=n(74723),x=n(16276),p=n(98177),b=n(29318),v=n(13205),g=n(12887);let j=()=>{let{theme:e,setTheme:t}=(0,g.F)(),n=(0,s.useMemo)(()=>{switch(e){case"light":return(0,r.jsx)("i",{className:"icon-[mingcute--sun-line]"});case"dark":return(0,r.jsx)("i",{className:"icon-[mingcute--moon-line]"});default:return(0,r.jsx)("i",{className:"icon-[mingcute--computer-line]"})}},[e]);return(0,r.jsx)(h.EM,{className:"p-2",onClick:()=>{switch(e){case"light":t("dark");break;case"dark":t("system");break;case"system":t("light")}},children:n})},w=()=>{let e=(0,v.useAggregationSelector)(e=>e.seo.title),t=(0,c.useRouter)(),n=(0,v.useAggregationSelector)(e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.avatar});return(0,r.jsxs)("header",{className:"fixed inset-x-0 top-0 z-[19] border-b-[0.5px] border-zinc-200 bg-white/80 pl-6 backdrop-blur dark:border-neutral-900 dark:bg-zinc-900/80",children:[(0,r.jsxs)("nav",{className:"flex h-16 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 lg:space-x-3",children:[(0,r.jsx)(h.EM,{onClick:()=>{t.push("/")},className:"p-2 text-2xl",children:n?(0,r.jsx)(o.default,{src:n,className:"rounded-full",height:28,width:28,alt:"Owner Avatar"}):"\uD835\uDD44"}),(0,r.jsx)(f.fY,{className:"opacity-20"}),(0,r.jsx)(a.default,{href:"/",className:"font-bold opacity-90 md:text-base",children:e}),(0,r.jsx)(f.fY,{className:"opacity-0 lg:opacity-20"})]}),(0,r.jsxs)("div",{className:"relative flex min-w-0 grow items-center justify-between",children:[(0,r.jsx)(P,{className:"hidden lg:flex"}),(0,r.jsx)(N,{})]})]}),(0,r.jsx)(z,{})]})},N=()=>{let e=(0,v.useAggregationSelector)(e=>e.user);return(0,r.jsxs)("div",{className:"relative mr-2 flex grow items-center justify-end space-x-2 lg:mr-4 lg:grow-0",children:[(0,r.jsx)(j,{}),(0,r.jsx)(y,{}),(0,r.jsx)(m.q,{className:"size-9 select-none rounded-full bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800 dark:ring-zinc-800",width:24,height:24,imageUrl:(null==e?void 0:e.avatar)||""})]})},k=(0,l.atom)(!1),y=()=>{let e=(0,d.dD)(),[t,n]=(0,l.useAtom)(k);return e?(0,r.jsx)(x.d,{open:t,onOpenChange:n,content:P,children:(0,r.jsx)(h.EM,{className:"!mr-2 rounded-full p-2",onClick:()=>{n(!t)},children:(0,r.jsx)("i",{className:"icon-[mingcute--menu-line]"})})}):null},P=e=>{let{className:t}=e,n=(0,l.useSetAtom)(k),o=u.ly.children.map(e=>{let t=e.title;return t?{title:t,path:e.path,icon:null==e?void 0:e.icon,redirect:e.redirect}:null}).filter(Boolean),d=(0,c.usePathname)(),m=(0,s.useCallback)(()=>{n(!1)},[]);return(0,r.jsx)("ul",{className:(0,b.Y2)("ml-2 items-center gap-2 [&_*]:text-[14px]",t),children:o.map(e=>{var t;let n="/dashboard".concat(e.path),s=""===e.path?"/dashboard"===d:d.startsWith(n);return(0,r.jsx)("li",{children:(0,r.jsxs)(a.default,{href:null!==(t=e.redirect)&&void 0!==t?t:n,onClick:s?p.PF:m,className:"relative flex items-center gap-1 rounded-xl p-2 duration-200 hover:bg-accent/40",children:[s&&(0,r.jsx)(i.m.span,{layoutId:"header",className:"absolute inset-0 z-[-1] rounded-xl bg-accent/20"}),e.icon,(0,r.jsx)("span",{children:e.title})]})},n)})})},z=()=>{var e;let t=(0,c.usePathname)(),n=(0,u.cX)(t);return(null==n?void 0:null===(e=n.children)||void 0===e?void 0:e.length)?(0,r.jsx)("nav",{className:"flex h-12 items-center justify-between overflow-auto lg:overflow-visible",children:(0,r.jsx)(A,{menus:n.children})}):null},A=e=>{var t;let{menus:n}=e,s=(0,c.usePathname)(),l=(0,u.cX)(s);return(null==l?void 0:null===(t=l.children)||void 0===t?void 0:t.length)?(0,r.jsx)("ul",{className:"flex w-full space-x-4",children:n.map(e=>{let t="/dashboard".concat(l.path).concat(e.path),n=s.startsWith(t);return(0,r.jsx)("li",{children:(0,r.jsxs)(a.default,{onClick:n?p.PF:void 0,href:"".concat(t),className:"relative flex items-center gap-1 rounded-lg px-2 py-1 duration-200 hover:bg-accent/40",children:[n&&(0,r.jsx)(i.m.span,{layoutId:"sub",className:"absolute inset-0 z-[-1] rounded-xl bg-accent/20"}),e.icon,(0,r.jsx)("span",{children:e.title})]})},e.path)})}):null}},47246:function(e,t,n){"use strict";n.r(t),n.d(t,{ComposedKBarProvider:function(){return u}});var r=n(71590),s=n(63488),i=n(36699),l=n(97270),o=n(5602),a=n(10471),c=n(29318);let u=e=>{let{children:t}=e,n=(0,l.useRouter)(),s=(0,a._)(()=>o.yn.map(e=>{let[t,r]=e;if(r.redirect)return null;let s="";return(r.parent&&(s=r.parent.title||""),(null==r?void 0:r.title)&&(s&&(s+=" > "),s+=r.title),s)?{id:r.path,name:s,perform:()=>{n.push(t)}}:null}).filter(Boolean));return(0,r.jsxs)(i.KBarProvider,{actions:s,children:[t,(0,r.jsx)(i.KBarPortal,{children:(0,r.jsx)(i.KBarPositioner,{children:(0,r.jsxs)(i.KBarAnimator,{className:"shadow-base w-full max-w-[600px] overflow-hidden rounded-lg bg-base-100/60 text-base-content shadow-xl backdrop-blur-md",children:[(0,r.jsx)(i.KBarSearch,{className:"w-full border-none bg-base-200/30 p-3 text-lg text-base-content outline-none backdrop-blur-md"}),(0,r.jsx)(d,{})]})})})]})};function d(){let{results:e,rootActionId:t}=(0,i.useMatches)();return(0,r.jsx)(i.KBarResults,{items:e,onRender:e=>{let{item:n,active:s}=e;return"string"==typeof n?(0,r.jsx)("div",{className:"px-4 py-2 text-xs uppercase opacity-50",children:n}):(0,r.jsx)(m,{action:n,active:s,currentRootActionId:t})}})}let m=s.forwardRef((e,t)=>{var n;let{action:i,active:l,currentRootActionId:o}=e,a=s.useMemo(()=>{if(!o)return i.ancestors;let e=i.ancestors.findIndex(e=>e.id===o);return i.ancestors.slice(e+1)},[i.ancestors,o]);return(0,r.jsxs)("div",{ref:t,className:(0,c.Y2)("flex cursor-pointer items-center justify-between p-3",l?"bg-base-200/70":""),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[i.icon&&i.icon,(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{children:[a.length>0&&a.map(e=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("span",{className:"mr-2 opacity-50",children:e.name}),(0,r.jsx)("span",{className:"mr-2",children:"›"})]},e.id)),(0,r.jsx)("span",{children:i.name})]}),i.subtitle&&(0,r.jsx)("span",{className:"text-xs",children:i.subtitle})]})]}),(null===(n=i.shortcut)||void 0===n?void 0:n.length)?(0,r.jsx)("div",{"aria-hidden":!0,className:"grid grid-flow-col gap-1",children:i.shortcut.map(e=>(0,r.jsx)("kbd",{className:"rounded bg-base-100 bg-opacity-10 p-1 text-sm",children:e},e))}):null]})});m.displayName="ResultItem"},7085:function(e,t,n){"use strict";n.d(t,{q:function(){return c}});var r=n(71590),s=n(63488),i=n(69709),l=n(42111),o=n(29318),a=n(3869);let c=e=>{let{shadow:t=!0,lazy:n=!0,wrapperProps:c={},size:u,imageUrl:d,text:m,url:h,randomColor:f,radius:x,...p}=e,b=(0,s.useRef)(null),[v,g]=(0,s.useState)(!n),[j,w]=(0,s.useState)(!1),{className:N,...k}=c,y=(0,s.useMemo)(()=>(m||d)&&f&&(0,l.Jm)((0,l.QM)(m||d)),[m,d,f]),P=(0,i.F)()?null==y?void 0:y.dark.background:null==y?void 0:y.light.background;return(0,r.jsx)("div",{className:(0,o.Y2)("box-border backface-hidden",t&&"shadow-sm",N),ref:b,style:{...u?{height:"".concat(u||80,"px"),width:"".concat(u||80,"px")}:void 0,...P?{backgroundColor:P}:void 0,...x?{borderRadius:"full"===x?"100%":"".concat(x,"px")}:void 0},...k,children:(0,s.createElement)(h?"a":"div",{className:"relative inline-block h-full w-full",...h?{href:h,target:"_blank",rel:"noreferrer"}:{}},d&&!j?(0,r.jsx)("div",{className:(0,o.Y2)("size-full bg-cover bg-center bg-no-repeat transition-opacity duration-300",N),children:(0,r.jsx)("img",{src:d,style:{opacity:v?1:0,...x?{borderRadius:"full"===x?"100%":"".concat(x,"px")}:void 0},height:u,width:u,onLoad:()=>g(!0),onError:()=>w(!0),loading:n?"lazy":"eager",...p,className:(0,o.Y2)("aspect-square duration-200",p.className)})}):m?(0,r.jsx)("div",{className:"relative flex size-full grow select-none items-center justify-center",children:(0,r.jsx)(a.I,{scale:.5,text:m})}):null)})}},56196:function(e,t,n){"use strict";n.r(t),n.d(t,{BackToTopFAB:function(){return a}});var r=n(71590),s=n(62719),i=n(48213),l=n(98731),o=n(86765);let a=()=>{let e=(0,s.Sj)(e=>e.h),t=(0,l.nZ)(t=>t>e/5,[e]);return(0,r.jsx)(o.FABBase,{id:"to-top","aria-label":"Back to top",show:t,onClick:i.YG,children:(0,r.jsx)("i",{className:"icon-[mingcute--arow-to-up-line]"})})}},86765:function(e,t,n){"use strict";n.r(t),n.d(t,{FABBase:function(){return p},FABContainer:function(){return v},FABPortable:function(){return b}});var r=n(71590),s=n(63488),i=n(31721),l=n(18968),o=n(15786),a=n(4711),c=n(36183),u=n(62719),d=n(29318),m=n(86990),h=n(98731),f=n(993);let x=(0,c.atom)(null),p=(0,l.D)((e,t)=>{let{children:n,show:s=!0,...i}=e,{className:l,...c}=i;return(0,r.jsx)(o.M,{mode:"wait",children:s&&(0,r.jsx)(a.m.button,{ref:t,"aria-label":"Floating action button",initial:{opacity:.3,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:.3,scale:.8},className:(0,d.Y2)("mt-2 flex items-center justify-center","size-12 text-lg md:size-10 md:text-base","outline-accent hover:opacity-100 focus:opacity-100 focus:outline-none","rounded-xl border border-zinc-400/20 backdrop-blur-lg dark:border-zinc-500/30 dark:text-zinc-200","bg-zinc-50/80 shadow-lg dark:bg-neutral-900/80","transition-all duration-500 ease-in-out",l),...c,children:n})})}),b=(0,l.D)((e,t)=>{let{onClick:n,children:i}=e,l=(0,s.useId)(),o=(0,c.useAtomValue)(x),a=(0,u.dD)();return(!e.onlyShowInMobile||a)&&o?(0,r.jsx)(f.RootPortal,{to:o,children:(0,r.jsx)(p,{ref:t,id:l,onClick:n,children:i})}):null}),v=e=>{let t=(0,u.dD)(),n=(0,h.zY)(e=>t&&"down"===e,[t]),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{m.e.set(x,l.current)},[]),(0,r.jsx)("div",{ref:l,"data-testid":"fab-container","data-hide-print":!0,className:(0,i.Z)("font-lg fixed bottom-[calc(2rem+env(safe-area-inset-bottom))] left-[calc(100vw-3rem-1rem)] z-[9] flex flex-col",n?"translate-x-[calc(100%+2rem)]":"","transition-transform duration-300 ease-in-out"),children:e.children})}},3869:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(71590),s=n(63488);let i=(0,s.memo)(e=>{let t=(0,s.useRef)(null),[n,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let n;if(!t.current)return;let r=t.current,s=r.parentElement;return s&&(n=new ResizeObserver(()=>{let{width:t}=s.getBoundingClientRect();r.style.fontSize="".concat(t/e.text.length*e.scale,"px"),i(!0)})).observe(s),()=>{n&&n.disconnect()}},[e.scale]),(0,r.jsx)("span",{ref:t,className:n?"":"invisible",children:e.text})});i.displayName="FlexText"},69709:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(12887);let s=()=>{let{theme:e,systemTheme:t}=(0,r.F)();return"dark"===e||"system"===e&&"dark"===t}},10471:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(63488);let s=e=>{let t=(0,r.useRef)();return t.current||(t.current=e()),t.current}},42111:function(e,t,n){"use strict";n.d(t,{Jm:function(){return i},QM:function(){return s},_R:function(){return l}});let r=(e,t,n)=>{let r=Math.floor(Math.random()*(t[1]-t[0]+1)+t[0]),s=Math.floor(Math.random()*(e[1]-e[0]+1)+e[0]);return{accent:"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)"),background:"hsl(".concat(n,", ").concat(r>30?r-30:0,"%, ").concat(s<80?s+20:100,"%)")}};function s(e){let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n=t%360;return n<0?n+360:n}let i=e=>{let t=null!=e?e:Math.floor(361*Math.random()),n=r([40,70],[70,90],t),s=r([20,50],[70,90],(t+180)%360);return{light:{accent:n.accent,background:n.background},dark:{accent:s.accent,background:s.background}}};function l(e,t){if(!/^hsl\((\d{1,3}),\s*([\d.]+)%,\s*([\d.]+)%\)$/.test(e))throw Error("Invalid HSL color value");return"".concat(e.slice(0,-1),", ").concat(t,")").replace("hsl","hsla")}},48213:function(e,t,n){"use strict";n.d(t,{HE:function(){return o},LL:function(){return i},YG:function(){return l}});var r=n(62636),s=n(82314);let i=e=>{let t=document.documentElement.scrollTop||document.body.scrollTop,n=()=>{i.stop()},i=(0,r.y)({keyframes:[t+1,e],autoplay:!0,...s.$O,onPlay(){window.addEventListener("wheel",n),window.addEventListener("touchmove",n)},onUpdate(e){e<=0&&i.stop(),window.scrollTo(0,e)}});return i.then(()=>{window.removeEventListener("wheel",n),window.removeEventListener("touchmove",n)}),i},l=()=>i(0),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return i(a(e)+t)},a=e=>{let t=0;for(;e;)t+=e.offsetTop,e=e.offsetParent;return t}},98731:function(e,t,n){"use strict";n.d(t,{D3:function(){return x},ic:function(){return w},pp:function(){return v},zY:function(){return j},Vt:function(){return b},nZ:function(){return g}});var r=n(71590),s=n(63488),i=n(8585),l=n(36183),o=n(86990);let a=(0,l.atom)(!1),c=e=>o.e.set(a,e);var u=n(35588);let d=e=>{let t=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,l.useAtomValue)((0,u.selectAtom)(e,(0,s.useCallback)(e=>t(e),n)))};return t.__atom=e,t};var m=n(191);let h=(0,l.atom)(0),f=(0,l.atom)(null),x=e=>{let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{}),t]})},p=()=>{let e=(0,l.useSetAtom)(h),t=(0,l.useSetAtom)(f),n=(0,s.useRef)(0),r=(0,s.useRef)(!1);return(0,i.L)(()=>{let i=(0,m.P2)(()=>{r.current||(c(!0),r.current=!0);let i=document.documentElement.scrollTop;t(n.current-i>0?"up":"down"),n.current=i,(0,s.startTransition)(()=>{e(n.current)})},16,{leading:!1});return window.addEventListener("scroll",i),i(),()=>{window.removeEventListener("scroll",i)}},[]),null},b=()=>(0,l.useAtomValue)(h),v=()=>(0,l.useAtomValue)(f),g=d(h),j=d(f),w=e=>(0,l.useAtomValue)((0,s.useMemo)(()=>(0,l.atom)(t=>{let n=t(h),r=t(f);return n>e&&"up"===r}),[e]))},66380:function(){}},function(e){e.O(0,[3595,9805,3623,5874,5322,8030,2636,54,2356,7996,2282,6370,7918,9315,6274,3780,5268,5881,775,3855,759,9013,1744],function(){return e(e.s=60072)}),_N_E=e.O()}]);