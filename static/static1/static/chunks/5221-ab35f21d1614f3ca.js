"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5221],{18501:function(e,t,n){n.d(t,{a:function(){return s},x:function(){return a}});var l=n(71590);function s(e){return(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,l.jsx)("path",{fill:"currentColor",d:"M12 20c4.4 0 8-3.6 8-8s-3.6-8-8-8s-8 3.6-8 8s3.6 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2m5 9.5V13h-6V7h1.5v4.5H17Z"})})}function a(e){return(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,l.jsx)("path",{fill:"currentColor",d:"M12 20a8 8 0 0 0 8-8a8 8 0 0 0-8-8a8 8 0 0 0-8 8a8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10a10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67l-.75 1.23L11 13V7h1.5Z"})})}},73646:function(e,t,n){n.d(t,{t:function(){return s}});var l=n(71590);let s=()=>(0,l.jsx)("svg",{version:"1.1",x:"0px",y:"0px",width:"59.227px",height:"59.227px",viewBox:"0 0 59.227 59.227",className:"fill-current",children:(0,l.jsx)("g",{children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M51.586,10.029c-0.333-0.475-0.897-0.689-1.449-0.607c-0.021-0.005-0.042-0.014-0.063-0.017L27.469,6.087    c-0.247-0.037-0.499-0.01-0.734,0.076L8.63,12.799c-0.008,0.003-0.015,0.008-0.023,0.011c-0.019,0.008-0.037,0.02-0.057,0.027    c-0.099,0.044-0.191,0.096-0.276,0.157c-0.026,0.019-0.051,0.038-0.077,0.059c-0.093,0.076-0.178,0.159-0.249,0.254    c-0.004,0.006-0.01,0.009-0.014,0.015L0.289,23.78c-0.293,0.401-0.369,0.923-0.202,1.391c0.167,0.469,0.556,0.823,1.038,0.947    l6.634,1.713v16.401c0,0.659,0.431,1.242,1.062,1.435l24.29,7.422c0.008,0.004,0.017,0.001,0.025,0.005    c0.13,0.036,0.266,0.059,0.402,0.06c0.003,0,0.007,0.002,0.011,0.002l0,0h0.001c0.143,0,0.283-0.026,0.423-0.067    c0.044-0.014,0.085-0.033,0.13-0.052c0.059-0.022,0.117-0.038,0.175-0.068l17.43-9.673c0.477-0.265,0.772-0.767,0.772-1.312    V25.586l5.896-2.83c0.397-0.19,0.69-0.547,0.802-0.973c0.111-0.427,0.03-0.88-0.223-1.241L51.586,10.029z M27.41,9.111    l17.644,2.59L33.35,17.143l-18.534-3.415L27.41,9.111z M9.801,15.854l21.237,3.914l-6.242,9.364l-20.78-5.365L9.801,15.854z    M10.759,43.122V28.605l14.318,3.697c0.125,0.031,0.25,0.048,0.375,0.048c0.493,0,0.965-0.244,1.248-0.668l5.349-8.023v25.968    L10.759,43.122z M49.479,41.1l-14.431,8.007V25.414l2.635,5.599c0.171,0.361,0.479,0.641,0.854,0.773    c0.163,0.06,0.333,0.087,0.502,0.087c0.223,0,0.444-0.05,0.649-0.146l9.789-4.698L49.479,41.1L49.479,41.1z M39.755,28.368    l-4.207-8.938L49.85,12.78l5.634,8.037L39.755,28.368z"})})})})},20752:function(e,t,n){n.d(t,{n:function(){return s}});var l=n(71590);function s(e){return(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,l.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 15h4V9h-4v6Zm0 2v3a1 1 0 0 1-2 0v-3H5a1 1 0 0 1 0-2h3V9H5a1 1 0 1 1 0-2h3V4a1 1 0 1 1 2 0v3h4V4a1 1 0 0 1 2 0v3h3a1 1 0 0 1 0 2h-3v6h3a1 1 0 0 1 0 2h-3v3a1 1 0 0 1-2 0v-3h-4Z"})})}},4340:function(e,t,n){n.d(t,{E:function(){return s}});var l=n(71590);function s(){return(0,l.jsx)("i",{className:"icon-[mingcute--thumb-up-line]"})}},86940:function(e,t,n){n.d(t,{c:function(){return u}});var l=n(71590),s=n(63488),a=n(62291),r=n(97270),i=n(98177),c=n(10826),o=n(13107);let u=e=>{let{href:t,children:n,...u}=e,d=(0,o.j)(),x=(0,r.usePathname)(),m=(0,s.useCallback)(async e=>{"/"!==x&&x!==c.Z.Posts&&d(t)&&(0,i.PF)(e)},[t,x,d]);return(0,l.jsx)(a.default,{href:t,onClick:m,...u,children:n})}},31104:function(e,t,n){n.r(t),n.d(t,{PostActionAside:function(){return M},PostBottomBarAction:function(){return S}});var l=n(71590),s=n(59908),a=n(4711),r=n(62719),i=n(4340),c=n(58704),o=n(96859),u=n(46403),d=n(17653),x=n(13373),m=n(33157),h=n(29318),f=n(29494),p=n(10826),g=n(58168),j=n(4348),v=n(1461),y=n(85907),b=n(51688),k=n(31248),N=n(52577),w=n(9089),C=n(28912);let S=()=>(0,r.dD)()?(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-8",children:[(0,l.jsx)(D,{}),(0,l.jsx)(T,{}),(0,l.jsx)(P,{}),(0,l.jsx)(N.U,{})]}):null,M=e=>{let{className:t}=e;return(0,l.jsxs)(b.tB,{className:t,children:[(0,l.jsx)(D,{}),(0,l.jsx)(T,{}),(0,l.jsx)(P,{}),(0,l.jsx)(N.U,{}),(0,l.jsx)(A,{})]})},P=()=>{let{present:e}=(0,C.kk)(["post_c"]);return(0,l.jsx)(c.EM,{className:"flex flex-col space-y-2",onClick:e,children:(0,l.jsx)(b.oc,{className:"icon-[material-symbols--notifications-active-outline] hover:text-accent"})})},A=()=>{let{title:e,id:t,allowComment:n}=(0,v.useCurrentPostDataSelector)(e=>({title:null==e?void 0:e.title,id:null==e?void 0:e.id,allowComment:null==e?void 0:e.allowComment}))||{},s=(0,y.useIsEoFWrappedElement)();return t&&!s&&n?(0,l.jsx)(k.S,{refId:t,title:e}):null},D=()=>{let e=(0,s.E)(),[t]=(0,d.N)(),n=(0,v.useCurrentPostDataSelector)(e=>null==e?void 0:e.id),r=(0,v.useCurrentPostDataSelector)(e=>null==e?void 0:e.count.like);if(!n)return null;let o=()=>{(0,m.MO)(n)||f.x1.activity.likeIt("Post",n).then(()=>{(0,m.D2)(n),(0,v.setGlobalCurrentPostData)(e=>{e.count.like+=1}),t()})},x=(0,m.MO)(n);return(0,l.jsx)(c.EM,{"aria-label":"Like this post",className:"flex flex-col space-y-2",onClick:()=>{o(),e.start("tap"),(0,g.A)("捕捉一只大佬！",void 0,{iconElement:(0,l.jsx)(a.m.i,{className:"text-uk-orange-light",initial:{scale:.96},animate:{scale:1.22},children:(0,l.jsx)(i.E,{})})})},children:(0,l.jsxs)(a.m.i,{className:(0,h.Y2)("relative flex hover:text-uk-orange-light hover:opacity-100",b.zg.base,x&&"text-uk-orange-dark"),animate:e,variants:{tap:{scale:1.3}},transition:{easings:["easeInOut"]},children:[(0,l.jsx)(i.E,{}),!!r&&(0,l.jsx)("span",{className:"absolute bottom-0 right-0 translate-x-[8px] text-[10px]",children:(0,l.jsx)(u.r,{children:r})})]})})},T=()=>{let e=(0,x.O)(),{present:t}=(0,o.Vu)();return e?(0,l.jsx)(c.EM,{"aria-label":"Share This Post Button",className:"flex flex-col space-y-2",onClick:()=>{let e=(0,v.getGlobalCurrentPostData)();if(!e)return;let n="share"in navigator,s=(0,j.Y4)((0,p.n)(p.Z.Post,{slug:e.slug,category:e.category.slug})).href,a="嘿，我发现了一片宝藏文章「".concat(e.title,"」哩，快来看看吧！");n?navigator.share({title:e.title,text:e.text,url:s}):t({title:"分享此内容",clickOutsideToDismiss:!0,content:()=>(0,l.jsx)(w.V,{text:a,title:"分享一片宝藏文章",url:s})})},children:(0,l.jsx)(b.oc,{className:"icon-[mingcute--share-forward-line] hover:text-uk-cyan-light"})}):null}},39761:function(e,t,n){n.r(t),n.d(t,{PostCopyright:function(){return u}});var l=n(71590),s=n(87313),a=n.n(s),r=n(74723),i=n(58168),c=n(1461),o=n(13205);let u=()=>{let e=(0,o.useAggregationSelector)(e=>e.user.name),t=(0,o.useAggregationSelector)(e=>e.url.webUrl),n=(0,c.useCurrentPostDataSelector)(e=>t&&e?{title:e.title,link:"".concat(t,"/posts/").concat(e.category.slug,"/").concat(e.slug),date:e.modified}:null,[t]);if(!n)return null;let{title:s,link:u,date:d}=n;return(0,l.jsxs)("section",{className:"mt-4 text-sm leading-loose text-gray-600 dark:text-neutral-400",id:"copyright",children:[(0,l.jsxs)("p",{children:["文章标题：",s]}),(0,l.jsxs)("p",{children:["文章作者：",e]}),(0,l.jsxs)("p",{children:["文章链接：",(0,l.jsx)("span",{children:u})," ",(0,l.jsx)("a",{onClick:()=>{navigator.clipboard.writeText(u),i.A.success("已复制文章链接")},"data-hide-print":!0,className:"cursor-pointer select-none",children:"[复制]"})]}),(0,l.jsxs)("p",{children:["最后修改时间:"," ",d?a()(d).format("YYYY 年 MM 月 DD 日 H:mm"):"暂没有修改过"]}),(0,l.jsx)(r.iz,{}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["商业转载请联系站长获得授权，非商业转载请注明本文出处及文章链接，您可以自由地在任何媒体以任何形式复制和分发作品，也可以修改和创作，但是分发衍生作品时必须采用相同的许可协议。",(0,l.jsx)("br",{}),"本文采用",(0,l.jsx)("a",{className:"shiro-link--underline",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",children:"知识共享署名 - 非商业性使用 - 相同方式共享 4.0 国际许可协议"}),"进行许可。"]})})]})}},27400:function(e,t,n){n.r(t),n.d(t,{PostItemHoverOverlay:function(){return c}});var l=n(71590),s=n(63488),a=n(31721),r=n(15786),i=n(4711);let c=()=>{let[e,t]=(0,s.useState)(!1),n=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=n.current;if(!e)return;let l=e.parentElement;if(l)return l.onfocus=()=>{t(!0)},l.onblur=()=>{t(!1)},()=>{l.onfocus=null,l.onblur=null}},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{ref:n,className:"absolute inset-0 z-10",onMouseEnter:()=>{t(!0)},onMouseLeave:()=>{t(!1)}}),(0,l.jsx)(r.M,{children:e&&(0,l.jsx)(i.m.div,{layout:!0,initial:{opacity:.2,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},layoutId:"post-item-hover-overlay",className:(0,a.Z)("absolute z-[-1] rounded-xl","bg-accent/10 dark:bg-neutral-800","inset-y-4 -left-4 -right-6")})})]})}},81637:function(e,t,n){n.r(t),n.d(t,{PostMetaBar:function(){return g}});var l=n(71590),s=n(63488),a=n(97270),r=n(18501),i=n(20752),c=n(4340),o=n(58704),u=n(18278),d=n(96859),x=n(46403),m=n(23324),h=n(29318),f=n(10826),p=n(63143);let g=e=>{var t,n,g,j;let{className:v,meta:y,children:b}=e,{present:k}=(0,d.Vu)(),N=(0,a.useRouter)();return(0,l.jsxs)("div",{className:(0,h.Y2)("flex min-w-0 shrink grow flex-wrap gap-2 text-sm",v),children:[(0,l.jsxs)("div",{className:"flex min-w-0 items-center space-x-1",children:[!!y.created&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.x,{}),(0,l.jsx)("span",{children:(0,l.jsx)(m.i,{date:y.created})})]}),!!y.modified&&(0,l.jsxs)(u.r,{wrapperClassName:"text-xs",as:"span",type:"tooltip",triggerElement:"(已编辑)",children:["编辑于 ",(0,l.jsx)(m.i,{date:y.modified})]})]}),!!y.category&&(0,l.jsxs)("div",{className:"flex min-w-0 items-center space-x-1",children:[(0,l.jsx)(i.n,{className:"translate-y-[0.5px]"}),(0,l.jsxs)("span",{className:"min-w-0 truncate",children:[(0,l.jsx)(o.EM,{onClick:()=>!!y.category&&N.push((0,f.n)(f.Z.Category,{slug:y.category.slug})),className:"shiro-link--underline font-normal",children:(0,l.jsx)("span",{children:null===(t=y.category)||void 0===t?void 0:t.name})}),(null===(n=y.tags)||void 0===n?void 0:n.length)?(0,l.jsxs)(l.Fragment,{children:[" ","/"," ",y.tags.map((e,t)=>{let n=t===y.tags.length-1;return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("button",{className:"shiro-link--underline",onClick:()=>k({content:()=>(0,l.jsx)(p.TagDetailModal,{name:e}),title:"Tag: ".concat(e)}),children:e},e),!n&&(0,l.jsx)("span",{children:", "})]},e)})]}):""]})]}),!!(null===(g=y.count)||void 0===g?void 0:g.read)&&(0,l.jsxs)("div",{className:"flex min-w-0 items-center space-x-1",children:[(0,l.jsx)("i",{className:"icon-[mingcute--eye-2-line]"}),(0,l.jsx)("span",{className:"min-w-0 truncate",children:(0,l.jsx)(x.r,{children:y.count.read})})]}),!!(null===(j=y.count)||void 0===j?void 0:j.like)&&(0,l.jsxs)("div",{className:"flex min-w-0 items-center space-x-1",children:[(0,l.jsx)(c.E,{}),(0,l.jsx)("span",{className:"min-w-0 truncate",children:(0,l.jsx)(x.r,{children:y.count.like})})]}),b]})}},97983:function(e,t,n){n.r(t),n.d(t,{PostOutdate:function(){return o}});var l=n(71590),s=n(87313),a=n.n(s),r=n(18257),i=n(23324),c=n(1461);let o=()=>{let e=(0,c.useCurrentPostDataSelector)(e=>null==e?void 0:e.modified);return e&&a()().diff(a()(e),"day")>60?(0,l.jsx)(r.j,{type:"warning",className:"my-10",children:(0,l.jsxs)("span",{className:"leading-[1.8]",children:["这篇文章上次修改于 ",(0,l.jsx)(i.i,{date:e}),"，可能部分内容已经不适用，如有疑问可询问作者。"]})}):null}},1826:function(e,t,n){n.r(t),n.d(t,{PostPinIcon:function(){return i}});var l=n(71590),s=n(63488),a=n(29494),r=n(38654);let i=e=>{let{pin:t,id:n}=e,[i,c]=(0,s.useState)(t);return(0,l.jsx)(r.Np,{onPinChange:async e=>{await a.x1.post.proxy(n).patch({data:{pin:e}}),c(e)},pin:i})}},64939:function(e,t,n){n.r(t),n.d(t,{PostRelated:function(){return r}});var l=n(71590),s=n(1461),a=n(86940);let r=e=>{let{infoText:t}=e,n=(0,s.useCurrentPostDataSelector)(e=>null==e?void 0:e.related);return n&&n.length?(0,l.jsxs)("div",{"data-hide-print":!0,className:"mb-5 mt-8",children:[(0,l.jsx)("h3",{className:"text-lg font-medium",children:(0,l.jsx)("span",{children:t})}),(0,l.jsx)("ul",{className:"list-inside list-disc",children:n.map(e=>{let t="/posts/".concat(e.category.slug,"/").concat(e.slug);return(0,l.jsx)("li",{children:(0,l.jsx)(a.c,{href:t,className:"underline-current underline-dashed leading-10 underline",children:e.title})},t)})})]}):null}},63143:function(e,t,n){n.r(t),n.d(t,{PostTagsFAB:function(){return f},TagDetailModal:function(){return j}});var l=n(71590),s=n(98823),a=n(63488),r=n(62291),i=n(73646),c=n(43536),o=n(15170),u=n(50407),d=n(96859),x=n(31779),m=n(29494),h=n(10826);let f=()=>{let{present:e}=(0,d.Vu)();return(0,l.jsx)(c.gU,{onClick:()=>{e({content:p,clickOutsideToDismiss:!0,title:"标签云",modalClassName:"w-[900px] max-w-full"})},children:(0,l.jsx)("i",{className:"icon-[mingcute--hashtag-line]"})})},p=()=>{let{data:e,isLoading:t}=(0,s.useQuery)({queryKey:["tags"],queryFn:async()=>(await m.x1.category.getAllTags()).data}),{present:n}=(0,d.Vu)(),r=(0,a.useCallback)(e=>{n({content:()=>(0,l.jsx)(j,{...e}),title:"Tag: ".concat(e.name)})},[]);return t?(0,l.jsx)(u.g,{}):e?(0,l.jsx)("div",{className:"flex flex-wrap gap-3",children:e.map(e=>(0,l.jsx)(g,{...e,onClick:r},e.name))}):(0,l.jsx)(i.t,{})},g=(0,a.memo)(function(e){let{count:t,name:n}=e;return(0,l.jsx)(x.V,{count:t,text:n,onClick:e.onClick,passProps:e})}),j=e=>{let{name:t}=e,{data:n,isLoading:a}=(0,s.useQuery)({queryKey:[t,"tag"],queryFn:async e=>{let{queryKey:t}=e,[n]=t;return(await m.x1.category.getTagByName(n)).data},staleTime:864e5,meta:{}}),{dismissAll:c}=(0,d.Vu)();return a?(0,l.jsx)("div",{className:"h-30 loading-dots flex w-full center"}):n?(0,l.jsx)(o.j,{children:n.sort((e,t)=>new Date(t.created).getTime()-new Date(e.created).getTime()).map(e=>(0,l.jsx)("li",{className:"flex items-center justify-between","data-id":e.id,children:(0,l.jsxs)("span",{className:"flex min-w-0 shrink items-center",children:[(0,l.jsx)("span",{className:"mr-2 inline-block tabular-nums",children:Intl.DateTimeFormat("en-us",{month:"2-digit",day:"2-digit",year:"2-digit"}).format(new Date(e.created))}),(0,l.jsx)(r.default,{onClick:()=>{c()},prefetch:!1,href:(0,h.n)(h.Z.Post,{category:e.category.slug,slug:e.slug}),className:"min-w-0 truncate leading-6",children:(0,l.jsx)("span",{className:"min-w-0 truncate",children:e.title})})]})},e.id))}):(0,l.jsx)(i.t,{})}},51688:function(e,t,n){n.d(t,{oc:function(){return u},tB:function(){return d},zg:function(){return o}});var l=n(71590),s=n(31721),a=n(62719),r=n(29318),i=n(98731),c=n(85907);let o={base:"text-[24px] opacity-80 duration-200 hover:opacity-100 relative"},u=e=>(0,l.jsx)("i",{className:(0,r.Y2)(o.base,e.className)}),d=e=>{let{className:t,children:n}=e,o=(0,c.useIsEoFWrappedElement)(),u=(0,a.Sj)(e=>e.h),d=(0,i.nZ)(e=>e+u>=document.body.scrollHeight-100,[u]);return(0,l.jsx)("div",{className:(0,r.Y2)("absolute bottom-0 left-0 -mb-4 flex max-h-[300px] p-4 transition-all duration-200 ease-in-out",o?"":"opacity-20 hover:opacity-100",t),children:(0,l.jsx)("div",{className:(0,s.Z)(d&&"-rotate-90 [&>button]:!rotate-90","flex origin-top-left flex-col gap-6 duration-200 ease-in-out [&>button]:duration-200"),children:n})})}},31248:function(e,t,n){n.d(t,{S:function(){return o}});var l=n(71590),s=n(58704),a=n(96859),r=n(13373),i=n(51688),c=n(10375);let o=e=>{let t=(0,r.O)(),{present:n}=(0,a.Vu)();return t?(0,l.jsx)(s.EM,{"aria-label":"Comment For This Post",className:"flex flex-col space-y-2",onClick:()=>{n({title:"评论",content:t=>(0,l.jsx)(c.x,{...e,...t})})},children:(0,l.jsx)(i.oc,{className:"icon-[mingcute--comment-line] hover:text-uk-pink-dark"})}):null}},52577:function(e,t,n){n.d(t,{U:function(){return b}});var l=n(71590),s=n(80328),a=n(63488),r=n(15786),i=n(4711),c=n(36183),o=n(62719),u=n(52810),d=n(58704),x=n(64815),m=n(16276),h=n(35987),f=n(13373),p=n(29318),g=n(13205),j=n(51688);let v=(0,c.atom)({x:0,y:0}),y=(0,c.atom)(!1),b=()=>{let e=(0,f.O)(),t=(0,g.useAppConfigSelector)(e=>{var t;return null===(t=e.module)||void 0===t?void 0:t.donate}),n=(0,c.useAtomValue)(y);return e&&t&&t.enable?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k,{}),(0,l.jsx)(s.fC,{open:n,children:(0,l.jsx)(s.PK,{forceMount:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)(r.M,{children:n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.t,{}),(0,l.jsxs)(s.cZ,{className:"fixed inset-0 z-[11] flex flex-col center",children:[(0,l.jsx)(C,{}),(0,l.jsx)(N,{})]})]})})})})})]}):null},k=()=>{let e=(0,c.useSetAtom)(v),t=(0,c.useSetAtom)(y),[n,s]=(0,a.useState)(!1),r=(0,o.dD)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w,{onClick:()=>{s(!0)},onMouseEnter:n=>{if(r)return;let l=n.target.getBoundingClientRect();e({x:l.left,y:l.top}),t(!0)}}),r&&(0,l.jsx)(m.d,{content:C,open:n,dismissible:!0,onOpenChange:s})]})},N=()=>{let e=(0,c.useSetAtom)(y),t=(0,c.useAtomValue)(v);return(0,l.jsx)(u.X,{trackerMessage:"Donate Show",action:h.b.Impression,children:(0,l.jsx)(w,{className:"focus-visible:text-uk-brown-light focus-visible:!shadow-none",style:{position:"fixed",left:t.x,top:t.y,zIndex:999,margin:0},onMouseLeave:()=>{e(!1)}})})},w=e=>{let{className:t,...n}=e,s=(0,g.useAppConfigSelector)(e=>e.module.donate);return s?(0,l.jsx)(d.EM,{"aria-label":"Donate to author",className:(0,p.Y2)("flex flex-col space-y-2",t),onClick:()=>{window.open(s.link,"_blank")},...n,children:(0,l.jsx)(j.oc,{className:"icon-[mingcute--teacup-line] hover:text-uk-brown-dark"})}):null},C=()=>{let e=(0,g.useAppConfigSelector)(e=>{var t;return null===(t=e.module)||void 0===t?void 0:t.donate});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"mb-6 text-lg font-medium",children:"感谢您的支持，助力梦想继续前行。"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-4 overflow-auto center",children:null==e?void 0:e.qrcode.map(e=>(0,l.jsx)(i.m.img,{exit:{opacity:0},src:e,alt:"donate",className:"h-[300px] max-h-[70vh]"},e))})]})}},9089:function(e,t,n){n.d(t,{V:function(){return d}});var l=n(71590),s=n(27422),a=n(90157),r=n(60789),i=n(58168),c=n(13205);let o=(0,s.default)(()=>n.e(9163).then(n.bind(n,99163)).then(e=>e.QRCodeSVG),{loadableGenerated:{webpack:()=>[99163]},ssr:!1}),u=[{name:"Twitter",icon:(0,l.jsx)(r.Z,{}),onClick:e=>{var t;window.open("https://twitter.com/intent/tweet?url=".concat(e.url,"&text=").concat(e.text,"&via=").concat(null===(t=(0,c.getAggregationData)())||void 0===t?void 0:t.seo.title))}},{name:"Telegram",icon:(0,l.jsx)(a.I,{className:"text-[#2AABEE]"}),onClick:e=>{window.open("https://telegram.me/share/url?url=".concat(e.url,"&text=").concat(e.text))}},{name:"Copy",icon:(0,l.jsx)("i",{className:"icon-[mingcute--copy-fill]"}),onClick:e=>{navigator.clipboard.writeText(e.url),(0,i.A)("Copied to clipboard")}}],d=e=>{let{url:t,text:n,title:s}=e;return(0,l.jsxs)("div",{className:"relative grid grid-cols-[200px_auto] gap-5",children:[(0,l.jsx)("div",{className:"qrcode inline-block size-[200px] bg-gray-200/80 dark:bg-zinc-800/90",children:(0,l.jsx)(o,{value:t,className:"aspect-square w-[200px]",height:200,width:200})}),(0,l.jsxs)("div",{className:"share-options flex flex-col gap-2",children:["分享到...",(0,l.jsx)("ul",{className:"w-[200px] flex-col gap-2 [&>li]:flex [&>li]:items-center [&>li]:space-x-2",children:u.map(e=>{let{name:a,icon:r,onClick:i}=e;return(0,l.jsxs)("li",{className:"flex cursor-pointer items-center space-x-2 rounded-md px-3 py-2 text-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Share to ".concat(a),role:"button",onClick:()=>i({url:t,text:n,title:s}),children:[r,(0,l.jsx)("span",{children:a})]},a)})})]})]})}},82629:function(e,t,n){n.d(t,{p:function(){return p}});var l=n(71590),s=n(63488),a=n(58704),r=n(31942),i=n(13238),c=n(98177),o=n(29494),u=n(58168),d=n(13205),x=n(76767);let m={post_c:"文章",note_c:"手记",say_c:"说说",recently_c:"速记"},h={email:"",types:{post_c:!1,note_c:!1,say_c:!1,recently_c:!1}},f=()=>{let[e,t]=(0,s.useReducer)((e,t)=>{switch(t.type){case"set":return{...e,...t.data};case"reset":return h}},{...h});return[e,t]},p=e=>{let{onConfirm:t,defaultTypes:n}=e,[h,p]=f(),g=(0,x.Lr)(),j=(0,i.h)(h);(0,s.useEffect)(()=>{n&&n.length&&p({type:"set",data:{types:n.reduce((e,t)=>(e[t]=!0,e),{...j.current.types})}})},[]);let v=(0,x.bY)(),y=async e=>{if(!g){u.A.error("订阅功能暂时没有开启哦");return}(0,c.PF)(e);let{email:n,types:l}=h;await o.x1.subscribe.subscribe(n,Object.keys(l).filter(e=>h.types[e])),u.A.success("订阅成功，谢谢你！"),p({type:"reset"}),t()},b=(0,d.useAggregationSelector)(e=>e.seo.title);return(0,l.jsxs)("form",{onSubmit:y,className:"flex flex-col gap-5",children:[(0,l.jsxs)("p",{className:"text-gray-1 text-sm",children:["欢迎订阅「",b,"」，我会定期推送最新的内容到你的邮箱。"]}),(0,l.jsx)(r.I,{type:"text",placeholder:"留下你的邮箱哦 *",required:!0,value:h.email,onChange:e=>{p({type:"set",data:{email:e.target.value}})}}),(0,l.jsx)("div",{className:"mb-2 flex gap-10",children:Object.keys(h.types).filter(e=>{var t;return null===(t=v.data)||void 0===t?void 0:t.allowTypes.includes(e)}).map(e=>(0,l.jsxs)("fieldset",{className:"children:cursor-pointer inline-flex items-center text-sm",children:[(0,l.jsx)("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",type:"checkbox",onChange:t=>{p({type:"set",data:{types:{...h.types,[e]:t.target.checked}}})},checked:h.types[e],id:e}),(0,l.jsx)("label",{htmlFor:e,className:"text-shizuku",children:m[e]})]},e))}),(0,l.jsxs)("p",{className:"text-gray-1 -mt-2 text-sm",children:["或者你也可以通过"," ",(0,l.jsx)("a",{href:"/feed",className:"text-green",target:"_blank",children:"/feed"})," ","订阅「",b,"」的 RSS 流。"]}),(0,l.jsx)(a.Sn,{disabled:!h.email,children:"订阅"})]})}},76767:function(e,t,n){n.d(t,{Lr:function(){return u},bY:function(){return o},kk:function(){return d}});var l=n(71590),s=n(98823),a=n(96859),r=n(29494),i=n(82629);let c=["subscribe-status"],o=()=>(0,s.useQuery)({queryKey:c,queryFn:r.x1.subscribe.check,gcTime:6e5}),u=()=>(0,s.useQuery)({queryKey:c,queryFn:r.x1.subscribe.check,select:e=>null==e?void 0:e.enable,gcTime:6e5,staleTime:6e5,meta:{persist:!1}}),d=e=>{let{present:t}=(0,a.Vu)();return{present:()=>{let n=t({title:"邮件订阅",clickOutsideToDismiss:!0,content:()=>(0,l.jsx)(i.p,{onConfirm:n,defaultTypes:e})})}}}},28912:function(e,t,n){n.d(t,{kk:function(){return l.kk}}),n(71590),n(58704);var l=n(76767);n(82629)},56196:function(e,t,n){n.r(t),n.d(t,{BackToTopFAB:function(){return c}});var l=n(71590),s=n(62719),a=n(48213),r=n(98731),i=n(86765);let c=()=>{let e=(0,s.Sj)(e=>e.h),t=(0,r.nZ)(t=>t>e/5,[e]);return(0,l.jsx)(i.FABBase,{id:"to-top","aria-label":"Back to top",show:t,onClick:a.YG,children:(0,l.jsx)("i",{className:"icon-[mingcute--arow-to-up-line]"})})}},86765:function(e,t,n){n.r(t),n.d(t,{FABBase:function(){return p},FABContainer:function(){return j},FABPortable:function(){return g}});var l=n(71590),s=n(63488),a=n(31721),r=n(18968),i=n(15786),c=n(4711),o=n(36183),u=n(62719),d=n(29318),x=n(86990),m=n(98731),h=n(993);let f=(0,o.atom)(null),p=(0,r.D)((e,t)=>{let{children:n,show:s=!0,...a}=e,{className:r,...o}=a;return(0,l.jsx)(i.M,{mode:"wait",children:s&&(0,l.jsx)(c.m.button,{ref:t,"aria-label":"Floating action button",initial:{opacity:.3,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:.3,scale:.8},className:(0,d.Y2)("mt-2 flex items-center justify-center","size-12 text-lg md:size-10 md:text-base","outline-accent hover:opacity-100 focus:opacity-100 focus:outline-none","rounded-xl border border-zinc-400/20 backdrop-blur-lg dark:border-zinc-500/30 dark:text-zinc-200","bg-zinc-50/80 shadow-lg dark:bg-neutral-900/80","transition-all duration-500 ease-in-out",r),...o,children:n})})}),g=(0,r.D)((e,t)=>{let{onClick:n,children:a}=e,r=(0,s.useId)(),i=(0,o.useAtomValue)(f),c=(0,u.dD)();return(!e.onlyShowInMobile||c)&&i?(0,l.jsx)(h.RootPortal,{to:i,children:(0,l.jsx)(p,{ref:t,id:r,onClick:n,children:a})}):null}),j=e=>{let t=(0,u.dD)(),n=(0,m.zY)(e=>t&&"down"===e,[t]),r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{x.e.set(f,r.current)},[]),(0,l.jsx)("div",{ref:r,"data-testid":"fab-container","data-hide-print":!0,className:(0,a.Z)("font-lg fixed bottom-[calc(2rem+env(safe-area-inset-bottom))] left-[calc(100vw-3rem-1rem)] z-[9] flex flex-col",n?"translate-x-[calc(100%+2rem)]":"","transition-transform duration-300 ease-in-out"),children:e.children})}},43536:function(e,t,n){n.d(t,{gU:function(){return l.FABPortable}}),n(56196);var l=n(86765)},15170:function(e,t,n){n.d(t,{j:function(){return a}});var l=n(71590),s=n(31721);let a=e=>{let{children:t,className:n}=e;return(0,l.jsx)("ul",{className:(0,s.Z)("shiro-timeline",n),children:t})}},46403:function(e,t,n){n.d(t,{r:function(){return c}});var l=n(71590),s=n(15786),a=n(4711),r=n(82314),i=n(17266);let c=e=>{let{children:t}=e,n=(0,i.Z)(t,300);return(0,l.jsx)(s.M,{mode:"popLayout",initial:!1,children:(0,l.jsx)(a.m.span,{initial:{opacity:0,y:-16},animate:{opacity:1,y:0},exit:{opacity:0,y:-16,position:"absolute"},transition:r.$O,children:n},n)})}},17266:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(63488);function s(e,t){let[n,s]=(0,l.useState)(e);return(0,l.useEffect)(()=>{let n=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(n)}},[e,t]),n}}}]);