<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
    <div>
		<ul>
			{% if user.is_authenticated %}
				欢迎您！{{ user.username }}
				<li>
					<a href="/logout/">Logout</a>
					<a href="/{{user.username}}">profile</a>
				</li>
			{% else %}
				<li>
					<a href="/login/">Login</a>
					<a href="/register/">Register</a>
				</li>
			{% endif %}
			<li><a href="/index/">Index</a></li>
		</ul>
	</div>
	<h5>
		{% if errmsg %}
			<span>{{ errmsg }}</span>
		{% endif %}
	</h5>
	<!-- register -->
	<div  id="register" v-cloak>
		<form @submit="reg_sub" method="post" action="/register/">
			<!-- @submit.prevent="reg_sub"  
			prevent the default action of the form, which is to reload the page
			翻译：阻止表单的默认行为，即重新加载页面
			-->
			
			<!-- jinja2 -->
			{{ csrf_input }}
			<!-- django -->
			{# <!-- {% csrf_token %} --> #}
			<!-- username -->
			...
			<input v-model="username" @input="check_uname" name="username" placeholder="username">
			<div v-show="error_username">${ error_username_msg }</div>
			<!-- phone -->
			...
			<input v-model="phone" @input="check_phone" name="phone" placeholder="phone">
			<div v-show="error_phone">${ error_phone_msg }</div>

			<!-- email -->
			<!-- <div class="mb-1">
				<label for="email" class="text-mono signup-text-prompt">
				  Enter your email<sup aria-hidden="true">*</sup>
				</label>
			</div>
			<input v-model="email" @input="check_email" name="email" type="email" placeholder="email">
			<div v-show="error_email">${ error_email_msg }</div> -->

			<!-- password -->
			...
			<input v-model="password" @input="check_pwd" name="password" 
				autocomplete="off" type="password" placeholder="password">
			<!-- autocomplete="off" 自动填充关闭, 就是点击输入框时不会弹出之前输入过的内容
			-->
			<div v-show="error_password">${ error_password_msg }</div>
			<!-- imgcode -->
			...
			<input name="imgcode" v-model="imgcode" autocomplete="off" 
				@input="check_imgcode" placeholder="imgcode">
			<img :src="imgcode_url">
			<div v-show="error_imgcode">${error_imgcode_msg}</div>
			<!-- smscode -->
			<p>
				<input v-model="smscode" placeholder="smscode" @input="check_smscode"  
					name="msgcode"  type="text" class="input-text" id="reg_mescode" >
				<span class="error-tip" v-show="error_smscode">${error_smscode_msg}</span>
				<a href="javascript:;" 
					style="font-size: 16px;text-align: center;font-weight: normal;float: right" 
					id="reg_mescode_btn" able="able" @click="send_smscode" >
					<!-- 获取验证码的button -->
					${ smscode_btn }
				</a>
			</p>
			<!-- register and login -->
			...
			<button type="submit">
				Continue
			</button>
		</form>
	</div>
	
	<style>
		[v-cloak] {
			display: none;
		}
		form {
			display: flex;
			flex-direction: column;
			align-items: center;
		}
	</style>
	
	<script src="{{static('js/vue.js')}}"></script>
	<script src="{{static('js/axios.min.js')}}"></script>
	<script src="/static/js/common.js"></script>
	<script type="text/javascript" src="{{ static('js/register.js') }}"></script>
</body>
</html>
